(function(){var isIE=navigator.appVersion.indexOf("MSIE")!=-1,nativeForEach=Array.prototype.forEach,Loader,Job;function isArray(arg){return(Object.prototype.toString.call(arg)=="[object Array]");}function each(obj,iterator,context){if(obj!=null){if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)==={}){return;}}}else{for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)==={}){return;}}}}}}}function mix(receiver,supplier,overwrite){for(key in supplier){var value=supplier[key];if(typeof value!="undefined"&&((overwrite&&value!=null)||!receiver[key])){receiver[key]=value;}}return(receiver);}Job=function(callback){this._workersCount=0;this._workersFinish=0;this._callback=callback||null;};Job.prototype={add:function(worker){this._workersCount++;},listener:function(){var self=this;return(function(){self._workersFinish++;self.finalize();});},finalize:function(callback){callback||(callback=this._callback);if(callback&&this._workersCount==this._workersFinish){callback();}else{this._callback=callback;}}};Loader=function(modules){this._basePath="";this._modules=modules;};Loader.prototype={_getAbsolutePath:function(path){if(!/^(https?:)?\/\//.test(path)){path=this._basePath+path;}return(path);},_loadFile:function(file,type,callback){var head=document.getElementsByTagName("head")[0];if(type=="script"){var script=document.createElement("script");script.type="text/javascript";script.src=this._getAbsolutePath(file)+this._versionSuffix;if(isIE){script.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){callback();}};}else{script.onload=function(){callback();};script.onerror=function(){callback();};}head.appendChild(script);}else{var style=document.createElement("link");style.setAttribute("rel","stylesheet");style.setAttribute("type","text/css");style.setAttribute("href",this._getAbsolutePath(file));head.appendChild(style);callback();}},_loadFilesSync:function(files,type,callback,cuFile){cuFile||(cuFile=0);var self=this,file=files[cuFile];if(file){this._loadFile(file,type,function(){self._loadFilesSync(files,type,callback,++cuFile);});}else{callback();}},_loadFiles:function(files,callback){var self=this,job=new Job();each(files,function(file){var type=file.type,paths=typeof file.path=="object"?file.path[self._config&&self._config.isDebug?"debug":"production"]:file.path;paths=isArray(paths)?paths:[paths];job.add(self._loadFilesSync(paths,type,job.listener()));});job.finalize(callback);},require:function(modules,callback){var self=this,job=new Job();each(modules,function(v,i){var module=self._modules[v],loadFiles=function(){self._loadFiles(module.files,job.listener());},isExists;try{isExists=typeof module.assert!="undefined"&&typeof eval(module.assert)!="undefined";}catch(e){isExists=false;}if(!isExists){if(module.dependencies){job.add(self.require(module.dependencies,loadFiles));}else{job.add(loadFiles());}}});job.finalize(callback);},setBaseByScriptPath:function(){var paths=arguments,pathsCount=paths.length;scripts=document.getElementsByTagName("script");for(var i=0,n=scripts.length;i<n;i++){var script=scripts[i],scriptPath=script.src.toLowerCase();for(var j=0;j<pathsCount;j++){var path=paths[j],position=scriptPath.indexOf(path);if(position!=-1){var versionSuffix=scriptPath.match(/\?[a-zA-Z0-9\=]+$/);this._basePath=scriptPath.substr(0,position).replace(/\/$/,"");this._versionSuffix=versionSuffix?versionSuffix[0]:"";return;}}}}};window.Loader=Loader;})();(function(){var b=window.SocialModules||{jquery:{assert:"jQuery",files:[{type:"script",path:"https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"},{type:"script",path:"https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js"}]},json2:{assert:"JSON",files:[{type:"script",path:"https://openbook-static-files-prod.s3.amazonaws.com/js/json2.js"}]},framework:{assert:"EToro",dependencies:["jquery","json2"],files:[{type:"script",path:"/scripts/builds/framework.min.js"}]},"social-bundle":{assert:"SocialService.Social",dependencies:["framework"],files:[{type:"script",path:"/scripts/builds/social-service-bundle.min.js"}]},"social-styles":{assert:"SocialService.Social",files:[{type:"style",path:"/styles/builds/social-service.min.css"}]}},c;function a(e,f,d){for(key in f){var g=f[key];if(typeof g!="undefined"&&((d&&g!=null)||!e[key])){e[key]=g;}}return(e);}c=function(){var e=this,d=function(g,f){if(typeof g=="function"){if(!f){f=g;}g={};}e.init(function(){f(EToro);},g);};Loader.call(this,b);this.setBaseByScriptPath("scripts/social-service.js","scripts/builds/social-service-loader.min.js");a(d,{getConfig:function(){return(e._config);}});return(d);};c.prototype={init:function(d,e){var f=e&&e.dependencies?e.dependencies:["social-bundle"];e=a({isDebug:false,culture:"en-us",loadCSS:true},e||this._config||{},true);delete e.dependencies;if(e.loadCSS){f.unshift("social-styles");}this._config=e;this.require(f,d);}};a(c.prototype,Loader.prototype);window.SocialService=new c();})();